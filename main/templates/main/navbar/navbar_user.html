{% if request.user.is_authenticated %}
    <div class="relative group" tabindex="0">
        <button class="flex items-center rounded-md py-2 text-gray-300 hover:bg-gray-800 hover:text-white focus:bg-gray-800 focus:text-white">
            <div class="mx-2">
                <div class="relative flex">
                    <svg fill="currentColor"
                         viewBox="0 0 24 24"
                         stroke-width="1.5"
                         stroke="currentColor"
                         class="h-6 w-6">
                        <path stroke-linecap="round" stroke-linejoin="round"
                              d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z">
                        </path>
                    </svg>
                    {% if notifications.exists %}
                        <div id="notifications-count"
                             class="absolute -top-3 -right-3 flex h-6 w-6 items-center justify-center rounded-full border-2 border-gray-800 bg-red-500 text-xs font-bold text-white">
                            {{ notifications.count }}
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="mx-2 hidden font-bold text-gray-300 lg:block">{{ request.user.account.display_name }}</div>
        </button>
        <ul class="absolute right-0 z-10 mt-2 group-focus-within:block hidden max-h-96 w-64 overflow-hidden overflow-y-auto whitespace-nowrap rounded-lg bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none">
            <li>
                <a href="{% url "accounts:profile" %}"
                   class="block px-4 py-2 text-gray-700 hover:bg-gray-300">Profile</a>
            </li>
            {% if request.user.is_staff %}
                <li>
                    <a href="{% url "admin:index" %}"
                       class="block px-4 py-2 text-gray-700 hover:bg-gray-300 lg:hidden">Admin</a>
                </li>
            {% endif %}
            <li>
                <a href="{% url "accounts:logout" %}"
                   class="block px-4 py-2 text-gray-700 hover:bg-gray-300">Log out</a>
            </li>
            {% if notifications.exists %}
                <hr id="notificationDivider">{% endif %}
            <li class="mt-2 text-center {% if not notifications.count > 0 %}hidden{% endif %}">
                <button id="markAllAsReadButton"
                        data-url="{% url 'mark-all-notification-as-read' request.user.id %}"
                        class="font-bold text-cyan-500 hover:text-gray-300">Mark all as read
                </button>
            </li>
            {% for notification in notifications %}
                <li class="flex w-64 items-center whitespace-normal notification-list-item 2xl:w-auto">
                    <button class="notificationMarkReadButton"
                            data-url="{% url 'mark-notification-as-read' notification.id %}">
                        <svg fill="none"
                             viewBox="0 0 24 24"
                             stroke-width="1.5"
                             stroke="currentColor"
                             class="mx-2 h-5 w-5 text-gray-600 hover:cursor-pointer hover:fill-gray-900 hover:text-white">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                  d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </button>
                    <div class="justify-self-start py-2 pr-4 text-gray-700">
                        <span class="font-bold">{{ notification.actor }}</span>
                        {{ notification.verb }}
                        {% if notification.action_object %}
                            <a href="

                                                {% if notification.custom_url %}{{ notification.custom_url }}{% else %}{{ notification.action_object_url }}{% endif %}"
                               class="font-bold text-cyan-500 hover:text-gray-300">
                                {{ notification.action_object }}
                            </a>
                        {% endif %}
                    </div>
                </li>
            {% endfor %}
        </ul>
    </div>
{% else %}
    <div class="relative group" tabindex="0">
        <button class="flex items-center rounded-md py-2 text-gray-300 hover:bg-gray-800 hover:text-white focus:bg-gray-800 focus:text-white">
            <div class="mx-2">
                <div class="flex">
                    <svg fill="currentColor"
                         viewBox="0 0 24 24"
                         stroke-width="1.5"
                         stroke="currentColor"
                         class="h-6 w-6">
                        <path stroke-linecap="round" stroke-linejoin="round"
                              d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z">
                        </path>
                    </svg>
                </div>
            </div>
        </button>
        <ul class="absolute right-0 z-10 mt-2 group-focus-within:block hidden overflow-hidden whitespace-nowrap rounded-lg bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none">
            <li>
                <a href="{% url "accounts:login" %}"
                   class="block px-4 py-2 text-gray-700 hover:bg-gray-300">Log in</a>
                <a href="{% url "accounts:create-account" %}"
                   class="block px-4 py-2 text-gray-700 hover:bg-gray-300">Create Account</a>
            </li>
        </ul>
    </div>
{% endif %}

